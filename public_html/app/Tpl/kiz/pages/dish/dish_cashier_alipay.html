

{include file="inc/header.html"}

<!-- 标题 -->
<div class="article-header">
    <div class="center-block w1200">

        <h1>{$page_title}</h1>


        <div class="btn-wrap pull-right tar">
            <a class="btn-link ml10" id="btn-save">保存</a>

            <!--<a class="btn-link ml10" id="btnSave-bak">保存并复制</a>-->

            <a class="btn-link ml10" href="javascript:history.back()">返回</a>
        </div>
    </div>
</div>
<div class="center-block panel-group ">
    <div class="panel">
        <div class="panel-heading">
            <h3 class="panel-title"><em>{$page_title}</em></h3>
        </div>
        <form method="post" id="warehouseForm" autocomplete="off">
            <input id="id" name="id" type="hidden" value="{$r.id}">

            <div class="panel-body" style="">
                <!--</dl>-->
                <dl class="panel-item">
                    <dt>
                        <label for="alipay_appid">AppId<strong class="red vam"> *</strong></label>
                    </dt>
                    <dd class="positionRelative">
                        <div class="search-box w402">
                            <input type="text" class="form-control w402 required" id="alipay_appid" name="alipay_appid"
                                   value="{$r.alipay_appid}" placeholder="alipay_appid" maxlength="48"  select='auto'>
                            <button type="button" class="close" name="close" aria-hidden="true">&times;</button>
                            <div class="wrong"></div>
                        </div>
                    </dd>
                </dl>
                <!--</dl>-->
                <dl class="panel-item">
                    <dt>
                        <label for="alipay_pid">PID<strong class="red vam"> *</strong></label>
                    </dt>
                    <dd class="positionRelative">
                        <div class="search-box w402">
                            <input type="text" class="form-control w402 required" id="alipay_pid" name="alipay_pid"
                                   value="{$r.alipay_pid}" placeholder="PID" maxlength="48"  select='auto'>
                            <button type="button" class="close" name="close" aria-hidden="true">&times;</button>
                            <div class="wrong"></div>
                        </div>
                    </dd>
                </dl>
                <!--</dl>-->
                <dl class="panel-item">
                    <dt>
                        <label for="alipay_key">Key<strong class="red vam"> *</strong></label>
                    </dt>
                    <dd class="positionRelative">
                        <div class="search-box w402">
                            <input type="text" class="form-control w402 required" id="alipay_key" name="alipay_key"
                                   value="{$r.alipay_key}" placeholder="Key" maxlength="48"  select='auto'>
                            <button type="button" class="close" name="close" aria-hidden="true">&times;</button>
                            <div class="wrong"></div>
                        </div>
                    </dd>
                </dl>
                <!--</dl>-->
                <dl class="panel-item">
                    <dt>
                        <label for="alipay_name">卖家账号<strong class="red vam"> *</strong></label>
                    </dt>
                    <dd class="positionRelative">
                        <div class="search-box w402">
                            <input type="text" class="form-control w402 required" id="alipay_name" name="alipay_name"
                                   value="{$r.alipay_name}" placeholder="卖家账号" maxlength="48"  select='auto'>
                            <button type="button" class="close" name="close" aria-hidden="true">&times;</button>
                            <div class="wrong"></div>
                        </div>
                    </dd>
                </dl>
                <!--</dl>-->
                <dl class="panel-item">
                    <dt>
                        <label for="alipay_storeId">商户门店编号<strong class="red vam"> *</strong></label>
                    </dt>
                    <dd class="positionRelative">
                        <div class="search-box w402">
                            <input type="text" class="form-control w402 required" id="alipay_storeId" name="alipay_storeId"
                                   value="{$r.alipay_storeId}" placeholder="商户门店编号" maxlength="48"  select='auto'>
                            <button type="button" class="close" name="close" aria-hidden="true">&times;</button>
                            <div class="wrong"></div>
                        </div>
                    </dd>
                </dl>
                <!--</dl>-->
                <dl class="panel-item">
                    <dt>
                        <label for="alipay_alipayStoreId">支付宝的店铺编号<strong class="red vam"> *</strong></label>
                    </dt>
                    <dd class="positionRelative">
                        <div class="search-box w402">
                            <input type="text" class="form-control w402 required" id="alipay_alipayStoreId" name="alipay_alipayStoreId"
                                   value="{$r.alipay_alipayStoreId}" placeholder="支付宝的店铺编号" maxlength="48"  select='auto'>
                            <button type="button" class="close" name="close" aria-hidden="true">&times;</button>
                            <div class="wrong"></div>
                        </div>
                    </dd>
                </dl>
                <!--</dl>-->
                <dl class="panel-item">
                    <dt>
                        <label for="alipay_providerId">系统服务商PID<strong class="red vam"> *</strong></label>
                    </dt>
                    <dd class="positionRelative">
                        <div class="search-box w402">
                            <input type="text" class="form-control w402 required" id="alipay_providerId" name="alipay_providerId"
                                   value="{$r.alipay_providerId}" placeholder="系统服务商PID" maxlength="48"  select='auto'>
                            <button type="button" class="close" name="close" aria-hidden="true">&times;</button>
                            <div class="wrong"></div>
                        </div>
                    </dd>
                </dl>
                <dl class="panel-item">
                    <dt>
                        <label for="alipay_public_key">支付宝公钥文件<strong class="red vam"> *</strong></label>
                    </dt>
                    <dd class="positionRelative">
                        <div class="search-box w402">
                            <input type="text" class="form-control w402 required" id="alipay_public_key" name="alipay_public_key"
                                   value="{$r.alipay_public_key}" placeholder="支付宝公钥文件" maxlength="48"  select='auto'>
                            <button type="button" class="close" name="close" aria-hidden="true">&times;</button>
                            <div class="wrong"></div>
                        </div>
                    </dd>
                </dl>
                <dl class="panel-item">
                    <dt>
                        <label for="alipay_merchant_public_key">商户公钥文件<strong class="red vam"> *</strong></label>
                    </dt>
                    <dd class="positionRelative">
                        <div class="search-box w402">
                            <input type="text" class="form-control w402 required" id="alipay_merchant_public_key" name="alipay_merchant_public_key"
                                   value="{$r.alipay_merchant_public_key}" placeholder="商户公钥文件" maxlength="48"  select='auto'>
                            <button type="button" class="close" name="close" aria-hidden="true">&times;</button>
                            <div class="wrong"></div>
                        </div>
                    </dd>
                </dl>
                <dl class="panel-item">
                    <dt>
                        <label for="alipay_merchant_private_key">商户私钥文件<strong class="red vam"> *</strong></label>
                    </dt>
                    <dd class="positionRelative">
                        <div class="search-box w402">
                            <input type="text" class="form-control w402 required" id="alipay_merchant_private_key" name="alipay_merchant_private_key"
                                   value="{$r.alipay_merchant_private_key}" placeholder="商户私钥文件" maxlength="48"  select='auto'>
                            <button type="button" class="close" name="close" aria-hidden="true">&times;</button>
                            <div class="wrong"></div>
                        </div>
                    </dd>
                </dl>
                <dl class="panel-item">
                    <dt>
                        <label><strong class="red vam"> </strong></label>
                    </dt>
                    <dd class="positionRelative">
                        <div class="search-box w402">
                            <ul class="panel-list-type">
                                <li>
                                    <label class="checkbox {if $r.alipay_plat == 1} checkbox-check {/if}" for="alipay_plat-01" id="checkbox-1">
                                        <input type="radio" name="alipay_plat" id="alipay_plat-01" {if $r.alipay_plat == 1} checked {/if} value="1">商家自收</label>
                                </li>
                                <li>
                                    <label class="checkbox {if $r.alipay_plat == 0} checkbox-check {/if}" for="alipay_plat-00" id="checkbox-0">
                                        <input type="radio" name="alipay_plat" id="alipay_plat-00" {if $r.alipay_plat == 0} checked {/if} value="0">平台代收</label>
                                </li>
                            </ul>
                        </div>
                    </dd>
                </dl>
            </div>

        </form>
    </div>
</div>
<!-- 添加通用js引入信息 -->
<script type="text/javascript" src="/app/Tpl/kiz/js/scm_kry/js/basic/scm-tooltip.js?v=20170315_135123" ></script>
<script type="text/javascript">
    var OrderStatusEnum = new EnumWrapper('');
    var SourceEnum = new EnumWrapper('');

    /* 支付方式编码，名字移除 */
    $("#wareshouseCode,#warehouseName").on("keyup change",function(){
        $(this).parent().find(".wrong").html("");
    });

    //Create by LiXing On 2015/8/11
    function getContextPath() {
        var pathName = document.location.pathname;
        var index = pathName.substr(1).indexOf("/");
        var result = pathName.substr(0, index + 1);
        return result;
    }

    $(function () {
        //保存
        $("#btn-save,#btnSave-bak").on("click", function () {
            var isBtnBak = $(this).attr("id")=="btnSave-bak";
            $("#warehouseForm").submit();
            //检查是否验证通过
            var flag = $("#warehouseForm").valid();
            if (flag) {
                var params = $("#warehouseForm").serialize();
                $.ajax({
                    type: "POST",
                    url: ctx2Path + "&act=save_pay_settings_ajax&type=2",
                    data: params,
                    dataType: "json",
                    contentType: "application/x-www-form-urlencoded;charset=UTF-8",
                    async: false,
                    cache: false,
                    success: function (data) {
                        $("#btn-save").bind("click");
                        if (data.success) {
                            $.layerMsg(data.message, true, {
                                end:function(){
                                    window.location.reload();
                                },shade: 0.3});
                        }
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        $("#btn-save").bind("click");
                        $.layerMsg("保存失败，请刷新页面或重新登录！", false);
                    }
                });
            }
        });


        $("#warehouseForm").validate({
            errorPlacement: function (error, element) {
                error.appendTo(element.parents(".positionRelative")
                    .find(".wrong"));
            },
            //只验证不提交 需要提交时注销这段代码
            debug: true
        });
    });
</script>

{include file="inc/footer.html"}

</body>
</html>